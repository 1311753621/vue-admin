(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d3300"],{"5c62":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("el-header",[a("div",{staticClass:"leftdiv"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("数据管理")]),a("el-breadcrumb-item",[t._v("用户列表")])],1)],1),a("div",{staticClass:"rightdiv"},[a("el-dropdown",[a("img",{staticClass:"avator",attrs:{src:"//elm.cangdu.org/img/default.jpg"}}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[t._v("首页")]),a("el-dropdown-item",[t._v("退出")])],1)],1)],1)]),a("el-main",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"食品名称"}},[a("span",[t._v(t._s(e.row.name))])]),a("el-form-item",{attrs:{label:"餐馆名称"}},[a("span",[t._v(t._s(e.row.address))])]),a("el-form-item",{attrs:{label:"食品 ID"}},[a("span",[t._v(t._s(e.row.item_id))])]),a("el-form-item",{attrs:{label:"餐馆 ID"}},[a("span",[t._v(t._s(e.row.category_id))])]),a("el-form-item",{attrs:{label:"商品分类"}},[a("span",[t._v(t._s(e.row.category))])]),a("el-form-item",{attrs:{label:"食品介绍"}},[a("span",[t._v(t._s(e.row.address))])]),a("el-form-item",{attrs:{label:" 餐馆地址"}},[a("span",[t._v(t._s(e.row.promotion_info))])]),a("el-form-item",{attrs:{label:" 食品评分"}},[a("span",[t._v(t._s(e.row.rating))])]),a("el-form-item",{attrs:{label:" 食品分类"}},[a("span",[t._v(t._s(e.row.promotion_info))])]),a("el-form-item",{attrs:{label:" 月销量"}},[a("span",[t._v(t._s(e.row.month_sales))])])],1)]}}])}),a("el-table-column",{attrs:{label:"食品名称",prop:"name"}}),a("el-table-column",{attrs:{label:"食品介绍",prop:"address"}}),a("el-table-column",{attrs:{label:"评分",prop:"rating"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row.id)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row.food_id)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.pagenum,"page-size":10,layout:"total, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pagenum=e},"update:current-page":function(e){t.pagenum=e}}})],1)],1)],1)},r=[],o=(a("b4fb"),a("6a61"),a("2e91")),l=(a("4ec3"),{data:function(){return{tableData:[],pagenum:1,limit:10,total:0,offset:0}},created:function(){},mounted:function(){this.foodlist(),this.getFoodlist()},methods:{handleSizeChange:function(t){console.log("".concat(val))},handleCurrentChange:function(t){this.pagenum=t,this.offset=(t-1)*this.limit,this.foodlist()},foodlist:function(){var t=this;this.$http.get("https://elm.cangdu.org/shopping/v2/foods?offset=".concat(this.offset,"&limit=").concat(this.limit,"&restaurant_id=").concat(this.restaurant_id)).then((function(e){console.log(e),t.tableData=e.data}))},getFoodlist:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get("shopping/restaurants/count");case 3:a=e.sent,n=a.data,1==n.status?t.total=n.count:t.$message.error("获取数据失败"),t.foodlist(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log("获取数据失败");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},handleDelete:function(t){var e=this;this.$confirm("确认删除这条记录吗？?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.$http["delete"]("https://elm.cangdu.org/shopping/v2/food/"+t).then((function(t){console.log(t)})),n.data;case 2:case"end":return a.stop()}}),a)}))))["catch"]((function(){}))}}}),s=l,i=a("c701"),c=Object(i["a"])(s,n,r,!1,null,"6ae4453a",null);e["default"]=c.exports}}]);